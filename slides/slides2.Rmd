---
title: "RMarkdown"
author: |
  | Mark Andrews
  | Psychology Department, Nottingham Trent University
  | 
  | \faEnvelopeO\  ```mark.andrews@ntu.ac.uk```
fontsize: 10pt
output:
  beamer_presentation:
    keep_tex: true
    fonttheme: "serif"
    includes:
      in_header: slides_preamble.tex
bibliography: references.bib
bibliography-style: apalike
---

```{r, include = F}
knitr::opts_chunk$set(echo = T, warning = F, message = F)
```
```{r, echo=F}
library(tidyverse)
library(pander)
```


# What is reproducible data analysis?

```{r, echo=F, out.width="0.5\\textwidth", fig.align='center',fig.cap="Part of a Results section in Forder \\& Lupyan (2019)."}
knitr::include_graphics('include/2019-07-06-145233_3286x1080_scrot.png')
```

* Any research that involves statistical data analysis will usually contain many figures and tables of statistical results, and also numerous statistical results within the text. 

* The goal of reproducible data analysis  is that anyone working independently could recreate all of these results exactly.

# Necessary criteria for reproducible data analysis

* The following three criteria seem necessary for a given data analysis to be reproducible.

  1. The *raw* data must be available. Data that is processed and "cleaned up" is not sufficient. 
  1. All the code for all the analysis must be available. All the code for all the data analysis pipeline is required, as are the scripts and build tools that execute the code. 
  1. The reports of the analysis, e.g., journal articles, presentations slides, etc, must be made by *dynamic documents*. 

* @gentleman2007statistical introduced the concept of a *research compendium*, which is a single package that contains all of the raw data, all the code for all the data analysis pipeline, and dynamic documents that generate all the final reports.

# Software tools for reproducible data analysis

* There are numerous (open source, or freely available) software tools and service that facilitate creating and maintaining of a research compendium. These include the following:

  * RMarkdown (and knitr, pandoc, \LaTeX, etc)
  * Git & GitHub 
  * Make or Drake (and other build automation tools)
  * Jupyter
  * R packages
  * Docker and virtual machines
  * Git LFS, Git annex, Git fat, etc
  
* Here, we will deal with just the first item on this list.

# What is RMarkdown?

* [RMarkdown](https://rmarkdown.rstudio.com/) is an R based dynamic document format. It is used with [knitr](https://yihui.name/knitr/) to generate documents in different formats that combine text with
content, including figures, tables, etc., that are dynamically generated by R (or other languages).

* It can be used to create publication ready manuscripts, slides for presentations, scientific posters.

* It, and its variants `bookdown`, `blogdown`, `pkgdown`, etc, can be used to create books, websites, interactive online demos and tutorials, etc.

# RMarkdown overview: Example 1

We write source code that is mixture of R code and explanatory text that optionally references the R variables.

```{r echo = FALSE, comment = ""}
cat(htmltools::includeText("include/rmarkdown-example-chunk-1.Rmd"))
```

# RMarkdown overview: Example 1 (rendered)

When we render this, we'll produce a document (in this case, \LaTeX) with both the code and any output and any evaluated variables in the text.

```{r, child = 'include/rmarkdown-example-chunk-1.Rmd'}
```


# RMarkdown overview: Example 2

We may turn off the rendering of the R source code with `echo = FALSE`. 

```{r echo = FALSE, comment = ""}
cat(htmltools::includeText("include/rmarkdown-example-chunk-2.Rmd"))
```

# RMarkdown overview: Example 2 (rendered)

Then we get e.g. just the rendered text, but not the R *chunk*.

```{r, child = 'include/rmarkdown-example-chunk-2.Rmd'}
```


# RMarkdown overview: Example 3

Figures will be rendered and inserted into the document in an identical manner.

```{r echo = FALSE, comment = ""}
cat(htmltools::includeText("include/rmarkdown-example-chunk-3.Rmd"))
```

# RMarkdown overview: Example 3 (rendered)


```{r, child = 'include/rmarkdown-example-chunk-3.Rmd'}
```


# RMarkdown overview: Example 4

Likewise, tables from statistical models can be rendered and inserted into the document.

```{r echo = FALSE, comment = ""}
cat(htmltools::includeText("include/rmarkdown-example-chunk-4.Rmd"))
```

# RMarkdown overview: Example 4 (rendered)


```{r, child = 'include/rmarkdown-example-chunk-4.Rmd'}
```


# RMarkdown overview: Example 5

RMarkdown allows us to typeset mathematical equations, symbols, etc., just as we would do with \LaTeX.

```{r echo = FALSE, comment = ""}
cat(htmltools::includeText("include/rmarkdown-example-chunk-5.Rmd"))
```

# RMarkdown overview: Example 5 (rendered)


```{r, child = 'include/rmarkdown-example-chunk-5.Rmd'}
```


# References